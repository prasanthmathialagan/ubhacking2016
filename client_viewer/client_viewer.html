<html>
<style>
    body {
        background: white }
    section {
        color: white;
        position: absolute;
        top: 50%;
        left: 50%;
        margin-right: -50%;
        transform: translate(-50%, -50%) }
</style>

<script type="text/javascript">
	function loadUrl(url) {
    	document.getElementById("video_frame").src=url;
	}

	function initializeIFrame() {
		// margin is used to over scrollbar
		var margin = 0;
		var width = window.innerWidth
						|| document.documentElement.clientWidth
						|| document.body.clientWidth;

		var height = window.innerHeight
						|| document.documentElement.clientHeight
						|| document.body.clientHeight;

		var frame = document.getElementById("video_frame");
		frame.height = 500;//height - margin;
		frame.width = 500;//width - margin;	

		// doesn't belong here
		//loadUrl('https://www.youtube.com/embed/e8FI120ItdU?autoplay=1');	
	}

</script>

<body onload="initializeIFrame()">

<section>
	<iframe id="video_frame" scrolling="no" frameborder="0" style="border: 0px none transparent"></iframe>
</section>

</body>

<script src="/socket.io/socket.io.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<script>
	var socket = io();
	
	socket.on('publish video', function(url){
		console.log("Video received");
	  loadUrl(url);
	});

	socket.emit('register viewer', '{"id":$ROOM}');

</script>
</html>
